<ion-content *ngIf="!!user">
  <ion-grid fixed>
    <ion-row>
      <ion-col class="text-center">
        <img class="float-left" src="/assets/brand.png" style="width: 120px;">
        <div class="float-right" (click)="goToMyinfo()" style="color:#999999;margin-top: 6px;">
          <img [src]="user.image" width="40px">
          <ion-label>{{user.name}}</ion-label>
        </div>
      </ion-col>
    </ion-row>
    <hr style="margin: 0px;">

    <ion-row>
      <ion-col class="text-center">
        <img src="/assets/brand-2.png" style="width: 170px;margin-top: 39px;">
        <br><br>
        <img src="/assets/recycle.png" style="width: 140px">
        <p class="point">{{user.point}}</p>
        <p class="point-text" style="color: #999999;">포인트</p>
        <img [src]="image" height="500px">
      </ion-col>
    </ion-row>

    <ion-row>
      <ion-col class="text-center">
        <img src="/assets/brand-3.png" style="width: 184px">
        <br>
        <img src="/assets/home-0.png" style="width: 120px;margin-top: 10px;margin-bottom: 20px;"
          (click)="goToStatics(template)">
        <!-- <ion-button class="btn-orange" (click)="goToStatics(template)">통계 확인하기</ion-button> -->
      </ion-col>
    </ion-row>
    <hr>
    <ion-row>
      <ion-col class="text-center">
        <img src="/assets/home-1.png" style="width: 160px;height: 53px;" (click)="open(template)">
        <img src="/assets/home-2.png" style="width: 160px;height: 53px;" (click)="estimate()">
        <!-- <ion-button class="btn-orange" (click)="open(template)">재활용하기</ion-button>
        <ion-button class="btn-orange" (click)="estimate()">평가하기</ion-button> -->
      </ion-col>
    </ion-row>
  </ion-grid>
</ion-content>

<ion-content *ngIf="!user">
  <ion-grid fixed>
    <ion-row>
      <ion-col class="text-center">
        리사이클 챌린지
        <div class="float-right">
          <ion-badge (click)="openLogin(loginTpl)">로그인</ion-badge>
          <ion-badge (click)="openSignup(signUpTpl)">가입하기</ion-badge>
        </div>
      </ion-col>
    </ion-row>

    <ion-row>
      <ion-col class="text-center">
        {{128309|number}}점
        <img [src]="image" height="500px">
      </ion-col>
    </ion-row>

    <ion-row>
      <ion-col class="text-center">
        전체 리사이클챌린지 랭크를 확인해보세요!
        <ion-button color="success">통계 확인하기</ion-button>
      </ion-col>
    </ion-row>

    <ion-row>
      <ion-col class="text-center">
        <ion-button color="success">재활용하기</ion-button>
        <ion-button color="success">평가하기</ion-button>
      </ion-col>
    </ion-row>
  </ion-grid>
</ion-content>

<ng-template #template>
  <div class="modal-header">
    <h4 class="modal-title pull-left">분리배출의 <span style="color:green">핵심 4가지</span></h4>
  </div>
  <div class="modal-body">
    <ion-list>
      <ion-item>
        <ion-avatar slot="start">
          <img src="/assets/1.png">
        </ion-avatar>
        <ion-label class="ion-text-wrap">
          <h2>비운다</h2>
          <h3>용기 안에 담겨있는 내용물을 깨끗이 비우고 배출합니다.</h3>
        </ion-label>
      </ion-item>

      <ion-item>
        <ion-avatar slot="start">
          <img src="/assets/2.png">
        </ion-avatar>
        <ion-label class="ion-text-wrap">
          <h2>헹군다</h2>
          <h3>재활용품에 묻어있는 이물질, 음식물 등은 닦거나 한 번 헹궈서 배출합니다.</h3>
        </ion-label>
      </ion-item>

      <ion-item>
        <ion-avatar slot="start">
          <img src="/assets/3.png">
        </ion-avatar>
        <ion-label class="ion-text-wrap">
          <h2>분리한다</h2>
          <h3>라벨 등의 다른 재질 부분은 제거하여 배출합니다.</h3>
        </ion-label>
      </ion-item>

      <ion-item>
        <ion-avatar slot="start">
          <img src="/assets/4.png">
        </ion-avatar>
        <ion-label class="ion-text-wrap">
          <h2>섞지 않는다</h2>
          <h3>종류별, 재질별로 구분하여 분리수거함으로 배출합니다.</h3>
        </ion-label>
      </ion-item>

    </ion-list>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-default" (click)="close()">확인</button>
  </div>
</ng-template>

<ng-template #loginTpl>
  <div class="modal-header">
    <h4 class="modal-title pull-left">로그인</h4>
  </div>
  <div class="modal-body">
    <form [formGroup]="loginForm">
      <ion-label>메일</ion-label>
      <ion-input class="form-control" type="text" [formControlName]="'mail'"></ion-input>
      <ion-label>비밀번호</ion-label>
      <ion-input class="form-control" type="text" [formControlName]="'password'"></ion-input>
    </form>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-default" [disabled]="loginForm.invalid" (click)="login()">확인</button>
  </div>
</ng-template>

<ng-template #signUpTpl>
  <div class="modal-header">
    <h4 class="modal-title pull-left">가입하기</h4>
  </div>
  <div class="modal-body">
    <form [formGroup]="signupForm">
      <ion-label>이름</ion-label>
      <ion-input class="form-control" type="text" [formControlName]="'name'"></ion-input>
      <ion-label>메일</ion-label>
      <ion-input class="form-control" type="text" [formControlName]="'mail'"></ion-input>
      <ion-label>비밀번호</ion-label>
      <ion-input class="form-control" type="text" [formControlName]="'password'"></ion-input>
      <ion-label>이미지</ion-label>
      <input [formControlName]="'file'" id="file" type="file" class="form-control" (change)="onFileChange($event)">
    </form>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-default" [disabled]="signupForm.invalid" (click)="signUp()">확인</button>
  </div>
</ng-template>